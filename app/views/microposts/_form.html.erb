<div class="b-form edit">
  <div class="b-errors">
    <% if @micropost.errors.any? %>
        <% @micropost.errors.full_messages.each do |msg| %>
            <li class="b-errors__item"><%= msg %></li>
        <% end %>
    <% end %>
  </div>
  <%= form_for(@micropost, remote: true) do |f| %>
      <%= f.label 'Category', class: 'b-form__checkboxes-label' %>
      <% @categories.each do |category| %>
        <div class="b-form__checkbox">
            <%= check_box_tag 'micropost[category_ids][]', category.id,
                              @micropost.categories.include?(category), class: 'b-form__checkbox-flag' %>
            <%= category.name %>
        </div>
      <% end %>
      <div class="b-form__field">
        <%= f.label :title, 'Title', class: 'b-field__label' %>
        <%= f.text_field :title, class: 'b-field__text-field' %>
      </div>
      <div class="b-form__field">
        <%= f.label :content, 'Post content', class: 'b-field__label' %><br>
        <%= f.text_area :content, class: 'b-field__text-area' %>
      </div>
      <div class="b-form__field">
        <%= f.submit 'Back', name: 'back', class: 'b-form__submit b-form__submit-text' %>
        <%= f.submit 'Save', class: 'b-form__submit b-form__submit-text' %>
      </div>
  <% end %>
</div>
